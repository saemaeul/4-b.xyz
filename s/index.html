<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢å¼ºç‰ˆæ‰“ç –å—æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            overflow: hidden;
            color: #fff;
        }
        
        .game-container {
            position: relative;
            width: 800px;
            padding: 20px;
            text-align: center;
            background: rgba(10, 15, 30, 0.85);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            overflow: hidden;
            z-index: 10;
        }
        
        .game-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            z-index: -1;
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        h1 {
            margin-bottom: 20px;
            font-size: 36px;
            color: #ff6b6b;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.7);
            letter-spacing: 2px;
        }
        
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .game-stats {
            display: flex;
            gap: 20px;
            font-size: 18px;
        }
        
        .game-stats span {
            display: flex;
            align-items: center;
            padding: 5px 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .life {
            color: #ff6b6b;
            margin-right: 8px;
        }
        
        .score {
            color: #4ecdc4;
        }
        
        .level {
            color: #ffd166;
        }
        
        .controls-top {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            outline: none;
            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 107, 107, 0.6);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .lang-btn {
            background: linear-gradient(to right, #118ab2, #06d6a0);
            padding: 8px 16px;
        }
        
        .game-board {
            position: relative;
            width: 760px;
            height: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        canvas {
            display: block;
            background: #0f1b2f;
        }
        
        .controls-bottom {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            font-size: 18px;
        }
        
        .controls-bottom p {
            margin: 5px 0;
            color: #a9d6e5;
        }
        
        .key {
            display: inline-block;
            padding: 2px 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 0 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            padding: 30px 50px;
            border-radius: 15px;
            text-align: center;
            z-index: 100;
            display: none;
            border: 2px solid #4ecdc4;
            box-shadow: 0 0 30px rgba(78, 205, 196, 0.5);
            min-width: 400px;
        }
        
        .message h2 {
            color: #4ecdc4;
            margin-bottom: 20px;
            font-size: 32px;
        }
        
        .message p {
            margin: 15px 0;
            font-size: 20px;
            line-height: 1.6;
        }
        
        .btn-large {
            padding: 12px 35px;
            margin-top: 20px;
            border-radius: 50px;
            font-size: 18px;
        }
        
        .language-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .lang-option {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .lang-option:hover {
            background: rgba(78, 205, 196, 0.3);
            transform: translateY(-3px);
        }
        
        .lang-option.active {
            background: rgba(78, 205, 196, 0.5);
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: float 15s infinite linear;
        }
        
        @keyframes float {
            from {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .difficulty-selector {
            margin: 20px 0;
        }
        
        .difficulty-btn {
            padding: 10px 25px;
            margin: 0 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .difficulty-btn:hover {
            background: rgba(255, 107, 107, 0.3);
        }
        
        .difficulty-btn.active {
            background: rgba(255, 107, 107, 0.5);
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯ç²’å­æ•ˆæœ -->
    <div class="particles" id="particles"></div>
    
    <div class="game-container">
        <h1 id="game-title">æ‰“ç –å—å°æ¸¸æˆ</h1>
        
        <div class="header-bar">
            <div class="game-stats">
                <span><span class="life">â¤ï¸</span> <span id="lives-text">ç”Ÿå‘½:</span> <span id="lives">3</span></span>
                <span><span class="score">â­</span> <span id="score-text">åˆ†æ•°:</span> <span id="score">0</span></span>
                <span><span class="level">ğŸ†</span> <span id="level-text">ç­‰çº§:</span> <span id="level">1</span></span>
            </div>
            
            <div class="controls-top">
                <button class="btn" id="pauseBtn">â¸ï¸ <span id="pause-text">æš‚åœ</span></button>
                <button class="btn" id="restartTopBtn">ğŸ”„ <span id="restart-text">é‡æ–°å¼€å§‹</span></button>
                <button class="btn lang-btn" id="langBtn">ğŸŒ <span id="lang-text">è¯­è¨€</span></button>
            </div>
        </div>
        
        <div class="game-board">
            <canvas id="gameCanvas" width="760" height="500"></canvas>
            
            <div class="message" id="startMessage">
                <h2 id="start-title">æ‰“ç –å—æ¸¸æˆ</h2>
                <p id="start-desc">é€‰æ‹©æ¸¸æˆéš¾åº¦å’Œè¯­è¨€å¼€å§‹æ¸¸æˆ</p>
                
                <div class="difficulty-selector">
                    <button class="difficulty-btn active" data-level="1">ç®€å•</button>
                    <button class="difficulty-btn" data-level="2">ä¸­ç­‰</button>
                    <button class="difficulty-btn" data-level="3">å›°éš¾</button>
                </div>
                
                <div class="language-selector">
                    <div class="lang-option active" data-lang="zh-CN">ç®€ä½“ä¸­æ–‡</div>
                    <div class="lang-option" data-lang="zh-TW">ç¹é«”ä¸­æ–‡</div>
                    <div class="lang-option" data-lang="en">English</div>
                    <div class="lang-option" data-lang="ko">í•œêµ­ì–´</div>
                </div>
                
                <button class="btn btn-large" id="startBtn">å¼€å§‹æ¸¸æˆ</button>
            </div>
            
            <div class="message" id="winMessage">
                <h2 id="win-title">æ­å–œè·èƒœï¼</h2>
                <p id="win-desc">æ‚¨æˆåŠŸé€šè¿‡äº†æ‰€æœ‰å…³å¡</p>
                <p id="final-score-text">æœ€ç»ˆå¾—åˆ†: <span id="finalScore">0</span></p>
                <button class="btn btn-large" id="restartWinBtn">å†ç©ä¸€æ¬¡</button>
            </div>
            
            <div class="message" id="gameOverMessage">
                <h2 id="gameover-title">æ¸¸æˆç»“æŸ</h2>
                <p id="gameover-desc">æ‚¨çš„ç”Ÿå‘½å€¼å·²è€—å°½</p>
                <p id="end-score-text">æœ€ç»ˆå¾—åˆ†: <span id="endScore">0</span></p>
                <button class="btn btn-large" id="restartBtn">é‡æ–°å¼€å§‹</button>
            </div>
            
            <div class="message" id="pauseMessage">
                <h2 id="pause-title">æ¸¸æˆæš‚åœ</h2>
                <p id="pause-instruction">æŒ‰ç©ºæ ¼é”®æˆ–ç‚¹å‡»æŒ‰é’®ç»§ç»­æ¸¸æˆ</p>
                <button class="btn btn-large" id="resumeBtn">ç»§ç»­æ¸¸æˆ</button>
            </div>
        </div>
        
        <div class="controls-bottom">
            <p><span id="control1">ä½¿ç”¨é”®ç›˜</span> <span class="key">â†</span> <span id="and-text">å’Œ</span> <span class="key">â†’</span> <span id="control2">æ–¹å‘é”®ç§»åŠ¨æŒ¡æ¿</span></p>
            <p><span id="control3">æŒ‰</span> <span class="key">ç©ºæ ¼</span> <span id="control4">æš‚åœ/ç»§ç»­æ¸¸æˆ</span></p>
        </div>
    </div>

    <script>
        // åˆ›å»ºèƒŒæ™¯ç²’å­æ•ˆæœ
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 100;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // éšæœºä½ç½®å’Œå¤§å°
                const size = Math.random() * 3 + 1;
                const posX = Math.random() * 100;
                const delay = Math.random() * 15;
                const duration = Math.random() * 10 + 15;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                // éšæœºé¢œè‰²
                const colors = ['#ff6b6b', '#4ecdc4', '#ffd166', '#a9d6e5'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.backgroundColor = color;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // å¤šè¯­è¨€æ”¯æŒ
        const translations = {
            'zh-CN': {
                title: "æ‰“ç –å—å°æ¸¸æˆ",
                lives: "ç”Ÿå‘½:",
                score: "åˆ†æ•°:",
                level: "ç­‰çº§:",
                pause: "æš‚åœ",
                restart: "é‡æ–°å¼€å§‹",
                lang: "è¯­è¨€",
                startTitle: "æ‰“ç –å—æ¸¸æˆ",
                startDesc: "é€‰æ‹©æ¸¸æˆéš¾åº¦å’Œè¯­è¨€å¼€å§‹æ¸¸æˆ",
                winTitle: "æ­å–œè·èƒœï¼",
                winDesc: "æ‚¨æˆåŠŸé€šè¿‡äº†æ‰€æœ‰å…³å¡",
                finalScore: "æœ€ç»ˆå¾—åˆ†:",
                playAgain: "å†ç©ä¸€æ¬¡",
                gameOverTitle: "æ¸¸æˆç»“æŸ",
                gameOverDesc: "æ‚¨çš„ç”Ÿå‘½å€¼å·²è€—å°½",
                restartGame: "é‡æ–°å¼€å§‹",
                pauseTitle: "æ¸¸æˆæš‚åœ",
                pauseInstruction: "æŒ‰ç©ºæ ¼é”®æˆ–ç‚¹å‡»æŒ‰é’®ç»§ç»­æ¸¸æˆ",
                resume: "ç»§ç»­æ¸¸æˆ",
                control1: "ä½¿ç”¨é”®ç›˜",
                and: "å’Œ",
                control2: "æ–¹å‘é”®ç§»åŠ¨æŒ¡æ¿",
                control3: "æŒ‰",
                control4: "æš‚åœ/ç»§ç»­æ¸¸æˆ"
            },
            'zh-TW': {
                title: "æ‰“ç£šå¡Šå°éŠæˆ²",
                lives: "ç”Ÿå‘½:",
                score: "åˆ†æ•¸:",
                level: "ç­‰ç´š:",
                pause: "æš«åœ",
                restart: "é‡æ–°é–‹å§‹",
                lang: "èªè¨€",
                startTitle: "æ‰“ç£šå¡ŠéŠæˆ²",
                startDesc: "é¸æ“‡éŠæˆ²é›£åº¦å’Œèªè¨€é–‹å§‹éŠæˆ²",
                winTitle: "æ­å–œç²å‹ï¼",
                winDesc: "æ‚¨æˆåŠŸé€šéäº†æ‰€æœ‰é—œå¡",
                finalScore: "æœ€çµ‚å¾—åˆ†:",
                playAgain: "å†ç©ä¸€æ¬¡",
                gameOverTitle: "éŠæˆ²çµæŸ",
                gameOverDesc: "æ‚¨çš„ç”Ÿå‘½å€¼å·²è€—ç›¡",
                restartGame: "é‡æ–°é–‹å§‹",
                pauseTitle: "éŠæˆ²æš«åœ",
                pauseInstruction: "æŒ‰ç©ºæ ¼éµæˆ–é»æ“ŠæŒ‰éˆ•ç¹¼çºŒéŠæˆ²",
                resume: "ç¹¼çºŒéŠæˆ²",
                control1: "ä½¿ç”¨éµç›¤",
                and: "å’Œ",
                control2: "æ–¹å‘éµç§»å‹•æ“‹æ¿",
                control3: "æŒ‰",
                control4: "æš«åœ/ç¹¼çºŒéŠæˆ²"
            },
            'en': {
                title: "Brick Breaker Game",
                lives: "Lives:",
                score: "Score:",
                level: "Level:",
                pause: "Pause",
                restart: "Restart",
                lang: "Language",
                startTitle: "Brick Breaker",
                startDesc: "Select difficulty and language to start",
                winTitle: "Congratulations!",
                winDesc: "You completed all levels",
                finalScore: "Final Score:",
                playAgain: "Play Again",
                gameOverTitle: "Game Over",
                gameOverDesc: "You ran out of lives",
                restartGame: "Restart Game",
                pauseTitle: "Game Paused",
                pauseInstruction: "Press SPACE or click button to resume",
                resume: "Resume Game",
                control1: "Use",
                and: "and",
                control2: "keys to move paddle",
                control3: "Press",
                control4: "to pause/resume game"
            },
            'ko': {
                title: "ë²½ëŒ ê¹¨ê¸° ê²Œì„",
                lives: "ëª©ìˆ¨:",
                score: "ì ìˆ˜:",
                level: "ë ˆë²¨:",
                pause: "ì¼ì‹œì •ì§€",
                restart: "ì¬ì‹œì‘",
                lang: "ì–¸ì–´",
                startTitle: "ë²½ëŒ ê¹¨ê¸°",
                startDesc: "ë‚œì´ë„ì™€ ì–¸ì–´ë¥¼ ì„ íƒí•˜ê³  ê²Œì„ ì‹œì‘",
                winTitle: "ì¶•í•˜í•©ë‹ˆë‹¤!",
                winDesc: "ëª¨ë“  ë ˆë²¨ì„ í†µê³¼í–ˆìŠµë‹ˆë‹¤",
                finalScore: "ìµœì¢… ì ìˆ˜:",
                playAgain: "ë‹¤ì‹œí•˜ê¸°",
                gameOverTitle: "ê²Œì„ ì˜¤ë²„",
                gameOverDesc: "ëª©ìˆ¨ì´ ë‹¤í–ˆìŠµë‹ˆë‹¤",
                restartGame: "ê²Œì„ ì¬ì‹œì‘",
                pauseTitle: "ê²Œì„ ì¼ì‹œì •ì§€",
                pauseInstruction: "ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ê³„ì†",
                resume: "ê²Œì„ ê³„ì†",
                control1: "í‚¤ë³´ë“œ",
                and: "ì™€",
                control2: "í‚¤ë¡œ íŒ¨ë“¤ ì´ë™",
                control3: "ëˆ„ë¥´ì„¸ìš”",
                control4: "ê²Œì„ ì¼ì‹œì •ì§€/ê³„ì†"
            }
        };
        
        // å½“å‰è¯­è¨€
        let currentLang = 'zh-CN';
        
        // æ›´æ–°UIæ–‡æœ¬
        function updateUIText() {
            const langData = translations[currentLang];
            
            document.getElementById('game-title').textContent = langData.title;
            document.getElementById('lives-text').textContent = langData.lives;
            document.getElementById('score-text').textContent = langData.score;
            document.getElementById('level-text').textContent = langData.level;
            document.getElementById('pause-text').textContent = langData.pause;
            document.getElementById('restart-text').textContent = langData.restart;
            document.getElementById('lang-text').textContent = langData.lang;
            document.getElementById('start-title').textContent = langData.startTitle;
            document.getElementById('start-desc').textContent = langData.startDesc;
            document.getElementById('win-title').textContent = langData.winTitle;
            document.getElementById('win-desc').textContent = langData.winDesc;
            document.getElementById('final-score-text').textContent = langData.finalScore;
            document.getElementById('restartWinBtn').textContent = langData.playAgain;
            document.getElementById('gameover-title').textContent = langData.gameOverTitle;
            document.getElementById('gameover-desc').textContent = langData.gameOverDesc;
            document.getElementById('end-score-text').textContent = langData.finalScore;
            document.getElementById('restartBtn').textContent = langData.restartGame;
            document.getElementById('pause-title').textContent = langData.pauseTitle;
            document.getElementById('pause-instruction').textContent = langData.pauseInstruction;
            document.getElementById('resumeBtn').textContent = langData.resume;
            document.getElementById('control1').textContent = langData.control1;
            document.getElementById('and-text').textContent = langData.and;
            document.getElementById('control2').textContent = langData.control2;
            document.getElementById('control3').textContent = langData.control3;
            document.getElementById('control4').textContent = langData.control4;
        }
        
        // æ¸¸æˆä¸»é€»è¾‘
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            updateUIText();
            
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const startMessage = document.getElementById('startMessage');
            const gameOverMessage = document.getElementById('gameOverMessage');
            const winMessage = document.getElementById('winMessage');
            const pauseMessage = document.getElementById('pauseMessage');
            const startBtn = document.getElementById('startBtn');
            const restartBtn = document.getElementById('restartBtn');
            const restartWinBtn = document.getElementById('restartWinBtn');
            const restartTopBtn = document.getElementById('restartTopBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const resumeBtn = document.getElementById('resumeBtn');
            const langBtn = document.getElementById('langBtn');
            const livesDisplay = document.getElementById('lives');
            const scoreDisplay = document.getElementById('score');
            const levelDisplay = document.getElementById('level');
            const finalScoreDisplay = document.getElementById('finalScore');
            const endScoreDisplay = document.getElementById('endScore');
            
            // æ¸¸æˆå˜é‡
            let paddleWidth = 100;
            let paddleHeight = 15;
            let paddleX = (canvas.width - paddleWidth) / 2;
            let ballRadius = 10;
            let ballX = canvas.width / 2;
            let ballY = canvas.height - 30;
            let ballDX = 5;
            let ballDY = -5;
            let rightPressed = false;
            let leftPressed = false;
            let gameRunning = false;
            let paused = false;
            let lives = 3;
            let score = 0;
            let level = 1;
            let difficulty = 1; // 1=ç®€å•, 2=ä¸­ç­‰, 3=å›°éš¾
            let brickRowCount = 3 + level;
            let brickColumnCount = 8;
            let brickWidth = 75;
            let brickHeight = 20;
            let brickPadding = 10;
            let brickOffsetTop = 30;
            let brickOffsetLeft = 30;
            
            // åˆ›å»ºç –å—æ•°ç»„
            let bricks = [];
            for (let c = 0; c < brickColumnCount; c++) {
                bricks[c] = [];
                for (let r = 0; r < brickRowCount; r++) {
                    bricks[c][r] = { x: 0, y: 0, status: 1 };
                }
            }
            
            // æ˜¾ç¤ºå¼€å§‹æ¶ˆæ¯
            startMessage.style.display = "block";
            
            // ç»˜åˆ¶ç –å—
            function drawBricks() {
                const colors = ['#ff6b6b', '#ffd166', '#06d6a0', '#118ab2', '#073b4c'];
                
                for (let c = 0; c < brickColumnCount; c++) {
                    for (let r = 0; r < brickRowCount; r++) {
                        if (bricks[c][r].status === 1) {
                            let brickX = (c * (brickWidth + brickPadding)) + brickOffsetLeft;
                            let brickY = (r * (brickHeight + brickPadding)) + brickOffsetTop;
                            bricks[c][r].x = brickX;
                            bricks[c][r].y = brickY;
                            
                            ctx.beginPath();
                            ctx.rect(brickX, brickY, brickWidth, brickHeight);
                            ctx.fillStyle = colors[r % colors.length];
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
            }
            
            // ç»˜åˆ¶æŒ¡æ¿
            function drawPaddle() {
                ctx.beginPath();
                ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);
                ctx.fillStyle = "#4ecdc4";
                ctx.shadowBlur = 15;
                ctx.shadowColor = "#4ecdc4";
                ctx.fill();
                ctx.closePath();
                ctx.shadowBlur = 0;
            }
            
            // ç»˜åˆ¶çƒ
            function drawBall() {
                ctx.beginPath();
                ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
                ctx.fillStyle = "#ff6b6b";
                ctx.shadowBlur = 10;
                ctx.shadowColor = "#ff6b6b";
                ctx.fill();
                ctx.closePath();
                ctx.shadowBlur = 0;
            }
            
            // ç»˜åˆ¶æ¸¸æˆå…ƒç´ 
            function draw() {
                if (!gameRunning || paused) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                drawBricks();
                drawPaddle();
                drawBall();
                collisionDetection();
                
                // çƒç¢°åˆ°å·¦å³å¢™
                if (ballX + ballDX > canvas.width - ballRadius || ballX + ballDX < ballRadius) {
                    ballDX = -ballDX;
                }
                
                // çƒç¢°åˆ°ä¸Šå¢™
                if (ballY + ballDY < ballRadius) {
                    ballDY = -ballDY;
                }
                // çƒç¢°åˆ°ä¸‹å¢™ï¼ˆå¤±å»ç”Ÿå‘½ï¼‰
                else if (ballY + ballDY > canvas.height - ballRadius) {
                    if (ballX > paddleX && ballX < paddleX + paddleWidth) {
                        // çƒç¢°åˆ°æŒ¡æ¿
                        ballDY = -ballDY;
                        
                        // æ ¹æ®å‡»ä¸­æŒ¡æ¿çš„ä½ç½®æ”¹å˜çƒçš„æ°´å¹³æ–¹å‘
                        let hitPoint = ballX - (paddleX + paddleWidth / 2);
                        ballDX = hitPoint * 0.2;
                    } else {
                        // å¤±å»ä¸€æ¡ç”Ÿå‘½
                        lives--;
                        livesDisplay.textContent = lives;
                        
                        if (lives <= 0) {
                            gameOver();
                            return;
                        } else {
                            // é‡ç½®çƒä½ç½®ï¼ˆæŒ¡æ¿ä½ç½®ä¿æŒä¸å˜ï¼‰
                            ballX = canvas.width / 2;
                            ballY = canvas.height - 30;
                            ballDX = 5 * (1 + difficulty * 0.3);
                            ballDY = -5 * (1 + difficulty * 0.3);
                        }
                    }
                }
                
                ballX += ballDX;
                ballY += ballDY;
                
                // æŒ¡æ¿ç§»åŠ¨æ§åˆ¶
                if (rightPressed && paddleX < canvas.width - paddleWidth) {
                    paddleX += 7 + difficulty;
                } else if (leftPressed && paddleX > 0) {
                    paddleX -= 7 + difficulty;
                }
                
                requestAnimationFrame(draw);
            }
            
            // ç¢°æ’æ£€æµ‹
            function collisionDetection() {
                for (let c = 0; c < brickColumnCount; c++) {
                    for (let r = 0; r < brickRowCount; r++) {
                        let brick = bricks[c][r];
                        if (brick.status === 1) {
                            if (ballX > brick.x && 
                                ballX < brick.x + brickWidth && 
                                ballY > brick.y && 
                                ballY < brick.y + brickHeight) {
                                ballDY = -ballDY;
                                brick.status = 0;
                                score += 10;
                                scoreDisplay.textContent = score;
                                
                                // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ç –å—éƒ½è¢«æ‰“ç ´
                                if (checkWin()) {
                                    winGame();
                                    return;
                                }
                            }
                        }
                    }
                }
            }
            
            // æ£€æŸ¥èƒœåˆ©æ¡ä»¶
            function checkWin() {
                for (let c = 0; c < brickColumnCount; c++) {
                    for (let r = 0; r < brickRowCount; r++) {
                        if (bricks[c][r].status === 1) {
                            return false;
                        }
                    }
                }
                return true;
            }
            
            // èƒœåˆ©å¤„ç†
            function winGame() {
                gameRunning = false;
                finalScoreDisplay.textContent = score;
                winMessage.style.display = "block";
            }
            
            // æ¸¸æˆç»“æŸå¤„ç†
            function gameOver() {
                gameRunning = false;
                endScoreDisplay.textContent = score;
                gameOverMessage.style.display = "block";
            }
            
            // é‡ç½®æ¸¸æˆ
            function resetGame() {
                lives = 3;
                score = 0;
                level = 1;
                brickRowCount = 3 + level;
                
                livesDisplay.textContent = lives;
                scoreDisplay.textContent = score;
                levelDisplay.textContent = level;
                
                ballX = canvas.width / 2;
                ballY = canvas.height - 30;
                ballDX = 5 * (1 + difficulty * 0.3);
                ballDY = -5 * (1 + difficulty * 0.3);
                paddleX = (canvas.width - paddleWidth) / 2;
                
                // é‡ç½®ç –å—
                bricks = [];
                for (let c = 0; c < brickColumnCount; c++) {
                    bricks[c] = [];
                    for (let r = 0; r < brickRowCount; r++) {
                        bricks[c][r] = { x: 0, y: 0, status: 1 };
                    }
                }
                
                startMessage.style.display = "none";
                gameOverMessage.style.display = "none";
                winMessage.style.display = "none";
                pauseMessage.style.display = "none";
                gameRunning = true;
                paused = false;
                draw();
            }
            
            // ä¸‹ä¸€å…³
            function nextLevel() {
                level++;
                levelDisplay.textContent = level;
                brickRowCount = 3 + level;
                
                // å¢åŠ çƒçš„é€Ÿåº¦
                ballDX *= 1.1;
                ballDY *= 1.1;
                
                // é‡ç½®ç –å—
                bricks = [];
                for (let c = 0; c < brickColumnCount; c++) {
                    bricks[c] = [];
                    for (let r = 0; r < brickRowCount; r++) {
                        bricks[c][r] = { x: 0, y: 0, status: 1 };
                    }
                }
                
                // é‡ç½®çƒå’ŒæŒ¡æ¿ä½ç½®
                ballX = canvas.width / 2;
                ballY = canvas.height - 30;
                paddleX = (canvas.width - paddleWidth) / 2;
                
                winMessage.style.display = "none";
                gameRunning = true;
                draw();
            }
            
            // æš‚åœ/ç»§ç»­æ¸¸æˆ
            function togglePause() {
                if (!gameRunning) return;
                
                paused = !paused;
                if (paused) {
                    pauseMessage.style.display = "block";
                } else {
                    pauseMessage.style.display = "none";
                    draw();
                }
            }
            
            // é”®ç›˜äº‹ä»¶ç›‘å¬
            function keyDownHandler(e) {
                if (e.key === "Right" || e.key === "ArrowRight") {
                    rightPressed = true;
                } else if (e.key === "Left" || e.key === "ArrowLeft") {
                    leftPressed = true;
                } else if (e.key === " ") {
                    togglePause();
                }
            }
            
            function keyUpHandler(e) {
                if (e.key === "Right" || e.key === "ArrowRight") {
                    rightPressed = false;
                } else if (e.key === "Left" || e.key === "ArrowLeft") {
                    leftPressed = false;
                }
            }
            
            // é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼ˆå¯é€‰æ§åˆ¶æ–¹å¼ï¼‰
            function mouseMoveHandler(e) {
                if (!gameRunning || paused) return;
                
                let relativeX = e.clientX - canvas.getBoundingClientRect().left;
                if (relativeX > 0 && relativeX < canvas.width) {
                    paddleX = relativeX - paddleWidth / 2;
                }
            }
            
            // äº‹ä»¶ç›‘å¬
            document.addEventListener("keydown", keyDownHandler);
            document.addEventListener("keyup", keyUpHandler);
            document.addEventListener("mousemove", mouseMoveHandler);
            
            // è¯­è¨€é€‰æ‹©
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.lang-option').forEach(el => el.classList.remove('active'));
                    this.classList.add('active');
                    currentLang = this.dataset.lang;
                    updateUIText();
                });
            });
            
            // éš¾åº¦é€‰æ‹©
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.difficulty-btn').forEach(el => el.classList.remove('active'));
                    this.classList.add('active');
                    difficulty = parseInt(this.dataset.level);
                });
            });
            
            // æŒ‰é’®äº‹ä»¶
            startBtn.addEventListener("click", resetGame);
            restartBtn.addEventListener("click", resetGame);
            restartWinBtn.addEventListener("click", resetGame);
            restartTopBtn.addEventListener("click", resetGame);
            pauseBtn.addEventListener("click", togglePause);
            resumeBtn.addEventListener("click", togglePause);
            langBtn.addEventListener("click", function() {
                startMessage.style.display = "block";
                gameRunning = false;
            });
        });
    </script>
</body>
</html>
